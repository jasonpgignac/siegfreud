<h1>Editing computer</h1>
<div id="computer_general_info" class="info_box">
	Serial: <%= @computer.serial_number %><br />
	Model: <%= @computer.model %><br />
	System Class: <%= @computer.system_class %>
	Mac Address: <%= @computer.mac_address %><br />
	PO Number: <%= @computer.po_number %><br />
	Division: <%= @computer.division.display_name %><br />
	Last Audited: <%= @computer.last_audited.to_s %>
</div>
<% form_for(@computer, :url => computer_path(@computer.serial_number)) do |f| %>
  	<% @computer.errors.each do |e| %> 
		<%= "Error: #{e.message}<br />" %>
	<% end %>
	<div class="databox">
		<table>
			<tr>
				<td>Stage:</td>
				<td>
					<%= f.select(	:stage_id, 
									options_from_collection_for_select(
										Stage.find(:all),
			 			  				"id",
			 			  				"name")) %>
				</td>
			</tr>
		</table>
	</div>
	<div class="databox">
		<div id="location_data" style='display: <%= @computer.stage.has_location ? "inline" : "none" %>'>
			<%= render :partial => 'location_form' %>
		</div>
		<div id="deployment_data" style='display: <%= @computer.stage.has_deployment ? "inline" : "none" %>'>
			<%= render :partial => 'deployment_form' %>
		</div>
	</div>
	<p><%= f.submit 'Save Changes' %></p>
<% end %>

<%= observe_field('computer_stage_id',
                  :frequency 	=> 0.5,
                  :function 	=> stage_change) %>
<%= link_to 'Show', @computer %> |
<%= link_to 'Back', computers_path %>